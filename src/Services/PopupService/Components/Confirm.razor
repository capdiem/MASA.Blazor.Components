@namespace MASA.Blazor.Experimental.Components
@inherits PopupComponentBase

<MDialog Value="Visible"
         Width="420"
         Persistent="true"
         @attributes="@Attributes">
    <MCard>
        @if (Title != null)
        {
            <MCardTitle>@Title</MCardTitle>
        }

        @if (Content != null)
        {
            <MCardText Style="padding-bottom: 0">
                @Content
            </MCardText>
        }

        <MCardActions>
            <MSpacer/>
            <MButton Text OnClick="HandleOnCancel">取消</MButton>
            <MButton Text Color="primary" OnClick="HandleOnOk">确定</MButton>
        </MCardActions>
    </MCard>
</MDialog>

@code {

    [Parameter]
    public string? Title { get; set; }

    [Parameter]
    public string? Content { get; set; }

    private Task HandleOnCancel()
    {
        return HideAndSetResult(false);
    }

    private Task HandleOnOk()
    {
        return HideAndSetResult(true);
    }

    private async Task HideAndSetResult(bool value)
    {
        Visible = false;

        if (PopupItem != null)
        {
            await Task.Delay(256);
            PopupItem.Discard(value);
        }
    }

}