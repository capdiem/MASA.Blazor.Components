@namespace Masa.Blazor.Experimental.Components
@inherits PopupComponentBase

<MSnackbar @bind-Value="Visible" Timeout="Timeout" @attributes="@Attributes" Top
           OnClosed="HandleOnClosed">
    <ChildContent>
        @if (Type != AlertTypes.None)
        {
            <MIcon Class="mr-1" Color="@IconColor">@Icon</MIcon>
        }

        @Content
    </ChildContent>
</MSnackbar>

@code {

    [Parameter]
    public string Content { get; set; }

    [Parameter]
    public int Timeout { get; set; } = 3000;

    [Parameter]
    public AlertTypes Type { get; set; }

    private string? Icon => Type switch
    {
        AlertTypes.Success => "mdi-check-circle",
        AlertTypes.Info => "mdi-information",
        AlertTypes.Warning => "mdi-exclamation",
        AlertTypes.Error => "mdi-alert",
        _ => null,
        };

    private string? IconColor => Type switch
    {
        AlertTypes.Success => "success",
        AlertTypes.Info => "info",
        AlertTypes.Warning => "warning",
        AlertTypes.Error => "error",
        _ => null
        };

    private void HandleOnClosed()
    {
        PopupItem?.Discard(true);
    }

}