@namespace Masa.Blazor.Experimental.Components
@typeparam TItem

<MMenu OffsetY NudgeBottom="8" Left NudgeRight="4">
    <ActivatorContent>
        <div class="d-inline-flex align-center">
            @if (PrependContent is not null)
            {
                @PrependContent

                <MDivider Vertical Class="mx-2" Style="align-self:auto;height:14px" />
            }
            @if (ActivatorContent is not null)
            {
                @ActivatorContent.Invoke(context)
            }
            else
            {
                <span @attributes="@context.Attrs">@ChildContent</span>
            }
        </div>
    </ActivatorContent>
    <ChildContent>
        <MList Dense>
            <MListItemGroup Value="@Value" ValueChanged="ItemValueChanged" Mandatory>
                @foreach (var item in Items)
                {
                    <MListItem Value="@ItemKey.Invoke(item)">
                        @if (ItemContent is null)
                        {
                            @if (ItemIcon is not null)
                            {
                                <MListItemIcon>
                                    <MIcon>@ItemIcon.Invoke(item)</MIcon>
                                </MListItemIcon>
                            }
                            <MListItemContent>
                                <MListItemTitle>@ItemText.Invoke(item)</MListItemTitle>
                            </MListItemContent>
                        }
                        else
                        {
                            @ItemContent.Invoke(item)
                        }
                    </MListItem>
                }
            </MListItemGroup>
        </MList>
    </ChildContent>
</MMenu>
